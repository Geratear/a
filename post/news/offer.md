---
title: 面试总结
private:
date: 2019-02-25
---
# 面试总结
face++面试总结
一面
笔试
编程题（不限语言）
1. 求两个路径的相对路径，例如x=/a/b/c/d y=/a/e/f，由y相对于x的相对目录为../../b/c/d
2. 已知一个日志文件格式为: time[2019-02-20 14:00:00] uri[/index] cost[10]  求出uri为/index的平均耗时
3. 遍历目录，非递归实现加5分
4. 实现一个二分查找
5. 求连通图的最短路径
设计题：
银行转账系统、微博系统

面试
502和504的区别？
mysql的慢查询是怎么回事?如何解决
redis有哪些命令可以实现锁？(后面一直问到了redlock)
mysql索引可以从哪些角度考虑优化？
给一个特别长的字段加索引，是否合适？如果业务确实需要加，该怎么办？

二面
手写算法
* 不同路径：https://leetcode-cn.com/problems/unique-paths/
* 找出数组中每个数的右边比他大的第一个数：https://blog.csdn.net/u012067392/article/details/72656472
项目问题（以下问题暂未确认标准答案）
种子红包系统的表设计及全流程
并发问题？
* 一个未参与活动的用户同时点击主人态链接，如何保证只插一条数据？
        ans:活动表里有user_id和activity_id的唯一索引
* 一个用户同时给另一个用户发起多个助力请求，如何保证只插一条数据？
       ans: 助力表里有user_id+openid+activity_id的唯一索引;助力入口处加redis锁，锁的key为user_id+openid
调发券接口超时但实际发成功，如何处理？
我的回答是：
前期的方案：查询表+发券+更新表。在一个事务中，发券失败会回滚。面试官表示这无法解决多发券的问题。
后期的方案：查询表+发券+更新表。去掉事务，若发券失败，依然更新表，状态更新为”发券失败“，用户不再能手动兑换。该记录为脏数据，之后用脚本确认修复（实际业务逻辑）。面试官不认可，表示应参考银行转账系统处理（当时有点懵，不知道怎么回答了。挂的话应该是挂在这里了）


高德面试：
一面：
监控平台了解吗，有什么好的解决方案？
假设要做一个监控平台，报警日志每秒种分生成几百兆日志，而监控平台又是实时的，有什么解决方案？
redis集群为什么没人用？有哪些缺点
redis会有哪些瓶颈？
redis主从同步原理？
redis在rdb时为什么会有短时间的不响应
redis在刚启动加载rdb文件时，此时客户端请求会有什么效果
ES索引是怎么建立的，你自己搭过ES集群吗，自己建的索引占用多大空间，定制化过ES的一些结果吗
docker容器的调试原理了解吗
通过哪种设计模式，能够实现美食、交通、景点等自由的组合，又能实现PM不断的提需求
编程题：金额1234567.89转换成1,234,567.89这种可读的方式

二面：
编程题：fib数列的非递归实现
场景：假设要缓存一部分数据，这部分数据的特点为key特别长，val只有少数的1，2，3等值，而又想节省缓存的空间，怎么实现
redis hash的底层数据结构
介绍下redis sds
redis跳跃表相对于树来说有什么优缺点，跳跃表的层高是怎么生成的
redis5.0在主从同步时还会有短暂的不响应吗？
redis删除过期键原理
redis rehash原理
linux底层一些原理了解吗

三面：总监没时间，会再约面试


头条面试总结
一面
说一下分布式事务？
说一下分布式锁？
层序遍历二叉树，输出按层换行
redis作缓存，如何保证缓存数据是最新的(如果采用先更新mysql，后清除缓存/更新缓存的方法，第二步失败了怎么办？)
讲一个你最熟悉的redis数据结构吧，为什么这么设计？
redis的持久化？
aof落盘有什么策略？
二面
分布式事务了解么？
消息对列了解么？kafka和rocketmq？如何保证消息的可靠？
编程题:在一个有序且不去重的数组中，求一个给定数字出现的次数，该数不在返回0(二分查找变形)


讲项目比较多，redis和memcache区别，网络模型，nginx多线程，一面总体感觉我们的东西实现的麻烦，技术细节，算法基本没有，这个还是看部门


我总结下我面的
1、123432.2432 每3位加一个, 也不是换成123,432.243,2
2、单点登录怎么设计
    浅谈SAML, OAuth, OpenID和SSO, JWT和Session
    https://juejin.im/post/5b3eac6df265da0f8815e906#heading-3

3、mysql建有哪些常识 a,b,c 组成的联合索引 以下哪几个查询可以用到索引 （a=7 and b=4, a!=7 and  = 4, a=7 and b>4 and c = 5）



数组有n个元素，输出所有子集
redis为什么这么快，讲讲事件模型
redis4.0新特性（说的懒删除）
php7.0新特性（数组，详细讲了下实现原理）
php数组的一些函数，问知道不用过没
epoll为什么比select，poll快
mysql索引
select count（*，1，id，name）的区别，为什么
表锁行锁，举了几个例子问会锁什么
讲了一会项目，然后说到了分布式事务（大概讲了讲两阶段协议）